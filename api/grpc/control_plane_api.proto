syntax = "proto3";

package velez_api;

import "google/api/annotations.proto";
import "npm.proto";

import "velez_api.proto";

option go_package = "go.vervstack.ru/velez/pkg/velez_api;velez_api";
option (npm_package) = "@vervstack/velez";

service ControlPlaneAPI {
  rpc ListServices(ListServices.Request) returns (ListServices.Response) {
    option (google.api.http) = {
      get: "/api/control_plane/services"
    };
  }
}

message ListServices {
  message Request {

  }
  message Response {
    repeated Service services = 1;
    repeated Service inactive_services = 2;
  }
}


message Service  {
  ServiceType type = 1;
  optional uint32 port = 2;

  optional CreateSmerd.Request constructor = 3;
}

enum ServiceType {
  unknown_service_type = 0;
  matreshka = 1;
  svarog = 2;
  webserver = 3;
  makosh = 4;
  portainer = 5;
}
